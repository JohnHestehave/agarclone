<canvas
  id="ctx"
  width="1200"
  height="600"
  style="border:1px solid #000000;"
></canvas>

<script>
  var ctx = document.getElementById("ctx").getContext("2d");
  var canvas = document.getElementById("ctx");

  var player = {
    x: 200,
    y: 200,
    width: 30,
    height: 30,
    stepX: 2,
    stepY: 2,
    moveRight: false,
    moveLeft: false,
    moveUp: false,
    moveDown: false
  };

  var food = {
    x: 300,
    y: 300,
    width: 10,
    height: 10
  };

  function drawPlayer() {
    ctx.fillStyle = "green";
    ctx.fillRect(player.x, player.y, player.width, player.height);
  }

  let foodPellets = [];

  for (let i = 0; i <= 200; i++) {
    generateFood();
  }

  function generateFood() {
    food.x = Math.floor(Math.random() * canvas.width);
    food.y = Math.floor(Math.random() * canvas.height);
    foodPellets.push({ x: food.x, y: food.y });
  }

  //setInterval(generateFood, 1000);

  function drawFood() {
    for (let i = 0; i < foodPellets.length; i++) {
      ctx.fillRect(foodPellets[i].x, foodPellets[i].y, food.width, food.height);
    }
  }

  function directionalInput() {
    document.onkeydown = function(event) {
      if (event.keyCode === 68) {
        player.moveRight = true;
      }
      if (event.keyCode === 65) {
        player.moveLeft = true;
      }
      if (event.keyCode === 87) {
        player.moveUp = true;
      }
      if (event.keyCode === 83) {
        player.moveDown = true;
      }
    };

    document.onkeyup = function(event) {
      if (event.keyCode === 68) {
        player.moveRight = false;
      }
      if (event.keyCode === 65) {
        player.moveLeft = false;
      }
      if (event.keyCode === 87) {
        player.moveUp = false;
      }
      if (event.keyCode === 83) {
        player.moveDown = false;
      }
    };
  }

  function movePlayer() {
    if (player.moveRight == true) {
      player.x += player.stepX;
    }
    if (player.moveLeft == true) {
      player.x -= player.stepX;
    }
    if (player.moveUp == true) {
      player.y -= player.stepY;
    }
    if (player.moveDown == true) {
      player.y += player.stepY;
    }
  }

  function foodCollision() {
    let distanceX = 0;
    let distanceY = 0;
    let distance = 0;

    let centerX = player.x + player.width / 2;
    let centerY = player.y + player.height / 2;

    for (let i = 0; i < foodPellets.length; i++) {
      let cX = foodPellets[i].x + food.width / 2;
      let cY = foodPellets[i].y + food.height / 2;

      distanceX = Math.abs(centerX - cX);
      distanceY = Math.abs(centerY - cY);

      distance = Math.sqrt(distanceX * distanceX + distanceY * distanceY);
      if (distance <= player.width / 2) {
        delete foodPellets[i];
        player.width += 5;
        player.height += 5;

        food.x = Math.floor(Math.random() * canvas.width);
        food.y = Math.floor(Math.random() * canvas.height);
        foodPellets[i] = { x: food.x, y: food.y };
      }
    }
  }

  setInterval(drawGame, 17);

  function drawGame() {
    ctx.clearRect(0, 0, canvas.width, canvas.height); // clear screen to draw next frame
    drawPlayer(); // draw player on current frame
    directionalInput(); // watch for WASD directional input
    movePlayer(); // change player.x and player.y to move accordingly, in increments of "step"
    drawFood(); // draw all foodPellets
    foodCollision(); // monitors distance between player and foodPellets, deletes food on collision
  }
</script>
